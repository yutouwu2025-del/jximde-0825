import{_ as F}from"./_plugin-vue_export-helper-BwE83l92.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css               *//* empty css                             */import{p as G}from"./papers-CVFD9aL8.js";import{r as p,a as J,o as K,c as O,b as S,e as n,f as e,w as o,a2 as H,J as W,a8 as X,M as Z,ak as ee,a6 as ae,G as z,a4 as le,k as te,P as oe,ab as ne,ac as se,ad as re,q as pe,n as d,a7 as ie,t as c,s as de,a0 as ue,v as w}from"./index-BxcNgWEf.js";const ce={class:"paper-database-container"},_e={class:"filter-section"},me={class:"papers-table"},fe={class:"paper-info"},ve={class:"paper-title"},ge={class:"paper-meta"},be={class:"journal-name"},ye={class:"pagination-wrapper"},we={__name:"PaperDatabase",setup(he){const _=p(!1),m=p([]),f=p(""),v=p(""),g=p(""),b=p(""),P=p([]),s=J({current:1,pageSize:20,total:0}),Q=a=>({journal:"期刊论文",conference:"学会论文",degree:"学位论文"})[a]||"未知",x=a=>a!=null&&a.includes("Q1")?"success":a!=null&&a.includes("Q2")?"info":a!=null&&a.includes("Q3")?"warning":"danger",C=a=>ue(a).format("MM-DD"),D=()=>{h()},Y=a=>{P.value=a},j=a=>{w.info("查看详情功能开发中...")},T=a=>{a.file_url?window.open(a.file_url,"_blank"):w.error("文件不存在")},U=()=>{w.info("导出功能开发中...")},h=async()=>{_.value=!0;try{const a=await G.getApprovedPapers({keyword:f.value,type:v.value,partition:g.value,year:b.value,page:s.current,pageSize:s.pageSize});m.value=a.data.papers||[],s.total=a.data.total||0}catch{m.value=[{id:1,title:"基于深度学习的图像识别算法研究",type:"journal",journal:"Pattern Recognition",partition:"Q1",first_author:"张三",publish_year:"2024",approved_at:"2024-01-20",file_url:"/files/paper1.pdf"}],s.total=1}finally{_.value=!1}};return K(()=>{h()}),(a,t)=>{const B=z("Search"),V=oe,M=te,u=le,r=se,k=ne,I=re,N=z("Download"),y=pe,A=H,i=ie,E=de,L=ae,R=ee,$=X;return S(),O("div",ce,[t[9]||(t[9]=n("div",{class:"page-header"},[n("h1",{class:"page-title"},"论文数据库"),n("p",{class:"page-description"},"管理所有已审核通过的论文数据")],-1)),n("div",_e,[e(A,{gutter:16},{default:o(()=>[e(u,{span:6},{default:o(()=>[e(M,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),placeholder:"搜索论文标题或作者",clearable:"",onInput:D},{prefix:o(()=>[e(V,null,{default:o(()=>[e(B)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{span:4},{default:o(()=>[e(k,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=l=>v.value=l),placeholder:"论文类型",clearable:""},{default:o(()=>[e(r,{label:"全部",value:""}),e(r,{label:"期刊论文",value:"journal"}),e(r,{label:"学会论文",value:"conference"}),e(r,{label:"学位论文",value:"degree"})]),_:1},8,["modelValue"])]),_:1}),e(u,{span:4},{default:o(()=>[e(k,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=l=>g.value=l),placeholder:"期刊分区",clearable:""},{default:o(()=>[e(r,{label:"全部",value:""}),e(r,{label:"Q1区",value:"Q1"}),e(r,{label:"Q2区",value:"Q2"}),e(r,{label:"Q3区",value:"Q3"}),e(r,{label:"Q4区",value:"Q4"})]),_:1},8,["modelValue"])]),_:1}),e(u,{span:4},{default:o(()=>[e(I,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=l=>b.value=l),type:"year",placeholder:"发表年度",format:"YYYY","value-format":"YYYY"},null,8,["modelValue"])]),_:1}),e(u,{span:6},{default:o(()=>[e(y,{type:"primary",onClick:U},{default:o(()=>[e(V,null,{default:o(()=>[e(N)]),_:1}),t[6]||(t[6]=d(" 导出数据 ",-1))]),_:1})]),_:1})]),_:1})]),n("div",me,[W((S(),Z(L,{data:m.value,stripe:"",onSelectionChange:Y},{default:o(()=>[e(i,{type:"selection",width:"55"}),e(i,{label:"论文信息","min-width":"300"},{default:o(({row:l})=>[n("div",fe,[n("div",ve,c(l.title),1),n("div",ge,[e(E,{size:"small"},{default:o(()=>[d(c(Q(l.type)),1)]),_:2},1024),n("span",be,c(l.journal),1),e(E,{size:"small",type:x(l.partition)},{default:o(()=>[d(c(l.partition)+"分区 ",1)]),_:2},1032,["type"])])])]),_:1}),e(i,{prop:"first_author",label:"第一作者",width:"120"}),e(i,{prop:"publish_year",label:"发表年度",width:"100"}),e(i,{prop:"approved_at",label:"审核时间",width:"120"},{default:o(({row:l})=>[d(c(C(l.approved_at)),1)]),_:1}),e(i,{label:"操作",width:"150"},{default:o(({row:l})=>[e(y,{text:"",type:"primary",size:"small",onClick:q=>j(l)},{default:o(()=>[...t[7]||(t[7]=[d(" 查看详情 ",-1)])]),_:2},1032,["onClick"]),e(y,{text:"",type:"info",size:"small",onClick:q=>T(l)},{default:o(()=>[...t[8]||(t[8]=[d(" 下载 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,_.value]]),n("div",ye,[e(R,{"current-page":s.current,"onUpdate:currentPage":t[4]||(t[4]=l=>s.current=l),"page-size":s.pageSize,"onUpdate:pageSize":t[5]||(t[5]=l=>s.pageSize=l),total:s.total,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])])}}},Be=F(we,[["__scopeId","data-v-37bdae13"]]);export{Be as default};
